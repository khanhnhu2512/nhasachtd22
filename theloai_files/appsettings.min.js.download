!function(f,d){"use strict";function g(c){var b=j.indexOf(c);a.fontRangeSheet.textContent=function(d){var e,a,f=["webkit-slider-runnable-track","moz-range-track","ms-track"],b=(d-1)*(100/(j.length-1)),c="";for($(".range-fontsize .range-labels li").removeClass("active selected"),(e=$(".range-fontsize .range-labels").find("li:nth-child("+d+")")).addClass("active selected"),e.prevAll().addClass("selected"),a=0;a<f.length;a++)c+=".range-fontsize .range {background: linear-gradient(to right, var(--anchor-color) 0%, var(--anchor-color) "+b+"%, transparent "+b+"%, transparent 100%)}",c+=".range-fontsize .range input::-"+f[a]+"{background: linear-gradient(to right, var(--anchor-color) 0%, var(--anchor-color) "+b+"%, #b2b2b2 "+b+"%, #b2b2b2 100%)}";return c}(b+1),a.contentElement.css("font-size",c),b==j.length-1?a.fontPlusBtn.addClass("isDisabled"):0==b?a.fontMinusBtn.addClass("isDisabled"):(a.fontMinusBtn.removeClass("isDisabled"),a.fontPlusBtn.removeClass("isDisabled"))}function h(b){a.contentElement.removeClass(function(b,a){return(a.match(/(^|\s)font_\S+/g)||[]).join(" ")}),a.contentElement.addClass(`font_${b}`),$(`input[name=${a.switchFontFamilyInputName}][value=${b}]`).prop("checked",!0)}function e(a,c){!0===c?($(".action-select a[data-tool='night'] i").removeClass("icon-moon").addClass("icon-sun"),a.find("i").removeClass("icon-moon").addClass("icon-sun"),a.attr("data-content","Light Theme"),$("html").attr("theme","dark").attr("bgcolor",b.bgcolor).attr("hgcolor",b.hgcolor)):($(".action-select a[data-tool='night'] i").removeClass("icon-sun").addClass("icon-moon"),a.find("i").removeClass("icon-sun").addClass("icon-moon"),a.attr("data-content","Dark Theme"),$("html").attr("theme","light").attr("bgcolor","white").attr("hgcolor",b.hgcolor))}function i(){var a;Cookies.set("lnusrconf",(a=b,`${a.fontSize},${a.fontFamily},${a.darkMode},${a.bgcolor},${a.hgcolor},${a.lang},${a.ttsvoice},${a.ttsrate}`),{secure:!0,expires:365})}var j=[14,16,18,20,22,24,26,28],a={fontPlusBtn:$("#fontplus, #svgFontPlus"),fontMinusBtn:$("#fontminus, #svgFontMinus"),fontRangeInput:$(".range-fontsize .range input"),darkModeSwitchBtn:$(".nightmode_switch"),switchFontFamilyInputName:"radioFont",contentElement:$(".d-chapter-content .box-detail"),fontRangeSheet:null},b=function(b){if(b){var a=b.split(",");return a.length<5?null:"undefined"===a[4]|| void 0===a[4]?null:{fontSize:parseInt(a[0]),fontFamily:a[1],darkMode:"true"===a[2],bgcolor:a[3],hgcolor:a[4],lang:a[5],ttsvoice:parseInt(a[6]),ttsrate:parseFloat(a[7])}}return null}(Cookies.get("lnusrconf")),c={lnconfig:b,init:function(){var c,d,e;b||(b={fontSize:18,fontFamily:"default",darkMode:!1,bgcolor:"black",hgcolor:"purple",lang:"vi",ttsvoice:0,ttsrate:1},i()),a.fontRangeSheet=((c=f.createElement("style")).id="font_range_slider_style",f.body.appendChild(c),c),d=b.fontSize,e=j.indexOf(d),a.fontRangeInput.val(e+1).trigger("input"),g(b.fontSize),h(b.fontFamily),setTimeout(function(){"undefined"!=typeof lightNovelVoice&&(lightNovelVoice.setRateSelection(b.ttsrate),lightNovelVoice.setVoiceSelection(b.ttsvoice))},1e3),a.fontRangeInput.on("input",function(){var a=j[parseInt(this.value-1)];b.fontSize=a,g(b.fontSize),i()})},updateTTSConf:function(a,c){b.ttsrate=c,b.ttsvoice=a,i()},updateThemeColors:function(c,d){b.bgcolor=c,b.hgcolor=d,i(),e(a.darkModeSwitchBtn,b.darkMode)}};$(".range-fontsize .range-labels li").on("click",function(){var b=$(this).index();a.fontRangeInput.val(b+1).trigger("input")}),a.fontPlusBtn.on("click",function(){var c=j.indexOf(b.fontSize);c+1<j.length&&(a.fontRangeInput.val(c+1+1).trigger("input"),b.fontSize=j[c+1],g(b.fontSize),i())}),a.fontMinusBtn.on("click",function(){var c=j.indexOf(b.fontSize);c-1>=0&&(a.fontRangeInput.val(c+1-1).trigger("input"),b.fontSize=j[c-1],g(b.fontSize),i())}),$(`input[name=${a.switchFontFamilyInputName}]`).change(function(){b.fontFamily=this.value,h(b.fontFamily),i()}),a.darkModeSwitchBtn.on("click",function(){b.darkMode=!b.darkMode,e(a.darkModeSwitchBtn,b.darkMode),i()}),Cookies.get("lnusrconf")&&e(a.darkModeSwitchBtn,b.darkMode),"function"==typeof define&&define.amd?define([],function(){return c}):d.lnwSettingsFunc=c,c.init()}(document,window)